/* ============================================
   Paywall / Report Purchase â€” Phase 1.8 (S7)
   Bottom sheet + Auth + Payment states
   ============================================ */

/* --- Layout --- */
.paywallLayout {
  position: fixed;
  inset: 0;
  z-index: var(--z-modal);
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
}

/* --- Backdrop --- */
.backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  animation: backdropFadeIn 0.25s ease;
}

@keyframes backdropFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* --- Bottom Sheet --- */
.bottomSheet {
  position: relative;
  z-index: 1;
  background: var(--color-surface);
  border-radius: var(--radius-2xl) var(--radius-2xl) 0 0;
  box-shadow: var(--shadow-bottom-sheet);
  max-height: 90vh;
  overflow-y: auto;
  animation: sheetSlideUp 0.35s cubic-bezier(0.22, 1, 0.36, 1);
}

@keyframes sheetSlideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.dragHandle {
  width: clamp(2rem, 1.5rem + 2.5vw, 3rem);
  height: 4px;
  background: var(--color-border);
  border-radius: var(--radius-full);
  margin: clamp(0.625rem, 0.5rem + 0.625vw, 0.75rem) auto clamp(0.5rem, 0.25rem + 1.25vw, 0.75rem);
}

.sheetContent {
  padding: 0 var(--space-page-x) clamp(1.5rem, 1rem + 2.5vw, 2.5rem);
  display: flex;
  flex-direction: column;
  gap: var(--space-component-gap);
  max-width: 28rem;
  margin: 0 auto;
  width: 100%;
}

/* --- Sheet title / subtitle --- */
.sheetTitle {
  font-size: var(--text-xl);
  font-weight: 700;
  color: var(--color-accent-gold);
  display: flex;
  align-items: center;
  gap: var(--space-inline-gap);
}

.sheetSubtitle {
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  line-height: 1.5;
}

/* --- Inclusions list --- */
.inclusionsList {
  display: flex;
  flex-direction: column;
  gap: clamp(0.375rem, 0.25rem + 0.625vw, 0.5rem);
}

.inclusionsLabel {
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--color-text-primary);
  margin-bottom: 0.25rem;
}

.inclusionItem {
  display: flex;
  align-items: center;
  gap: clamp(0.375rem, 0.25rem + 0.625vw, 0.5rem);
  font-size: var(--text-sm);
  color: var(--color-text-primary);
}

.inclusionCheck {
  font-size: var(--text-sm);
  flex-shrink: 0;
}

/* --- Price block --- */
.priceBlock {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.25rem;
  padding: clamp(0.75rem, 0.5rem + 1.25vw, 1.25rem);
  background: var(--color-surface);
  border-radius: var(--radius-lg);
}

.priceRow {
  display: flex;
  align-items: baseline;
  gap: clamp(0.5rem, 0.375rem + 0.625vw, 0.75rem);
}

.priceMain {
  font-size: var(--text-2xl);
  font-weight: 700;
  color: var(--color-accent-gold);
}

.priceOriginal {
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  text-decoration: line-through;
}

.priceDiscount {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--color-success);
}

/* --- Pay button --- */
.payButton {
  width: 100%;
  padding: clamp(0.875rem, 0.75rem + 0.625vw, 1.125rem);
  font-size: var(--text-base);
  font-weight: 700;
  color: var(--color-neutral-white);
  background: var(--gradient-cta);
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: box-shadow var(--transition-fast), transform var(--transition-fast);
}

.payButton:hover {
  box-shadow: var(--shadow-lg);
  transform: translateY(-1px);
}

.payButton:active {
  transform: scale(0.98);
}

/* --- Security badges --- */
.securityBadges {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: clamp(0.75rem, 0.5rem + 1.25vw, 1.25rem);
}

.securityBadge {
  font-size: var(--text-xs);
  color: var(--color-text-secondary);
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* --- Phone input --- */
.phoneInputGroup {
  display: flex;
  align-items: center;
  border: 1.5px solid var(--color-border);
  border-radius: var(--radius-button);
  overflow: hidden;
  transition: border-color var(--transition-fast);
}

.phoneInputGroup:focus-within {
  border-color: var(--color-primary-saffron-light);
  box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.1);
}

.phonePrefix {
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem) clamp(0.75rem, 0.5rem + 1.25vw, 1rem);
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--color-text-primary);
  background: var(--color-input-bg);
  border-right: 1px solid var(--color-border);
  flex-shrink: 0;
}

.phoneInput {
  flex: 1;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-base);
  border: none;
  outline: none;
  background: transparent;
  color: var(--color-text-primary);
  min-width: 0;
}

.phoneInput::placeholder {
  color: var(--color-text-muted);
}

/* --- OTP Send button --- */
.otpSendButton {
  width: 100%;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--color-neutral-white);
  background: var(--color-primary-saffron);
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: background-color var(--transition-fast), transform var(--transition-fast);
}

.otpSendButton:hover {
  background: var(--color-primary-saffron-dark);
}

.otpSendButton:active {
  transform: scale(0.98);
}

.otpSendButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* --- OR divider --- */
.orDivider {
  display: flex;
  align-items: center;
  gap: clamp(0.75rem, 0.5rem + 1.25vw, 1.25rem);
}

.orDivider::before,
.orDivider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--color-border);
}

.orDivider span {
  font-size: var(--text-xs);
  font-weight: 500;
  color: var(--color-text-secondary);
}

/* --- Google button --- */
.googleButton {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-inline-gap);
  width: 100%;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--color-text-primary);
  background: var(--color-surface);
  border: 1.5px solid var(--color-border);
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.googleButton:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: var(--color-border);
}

.googleButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.googleButton svg {
  flex-shrink: 0;
}

/* --- OTP input group --- */
.otpInputGroup {
  display: flex;
  justify-content: center;
  gap: clamp(0.375rem, 0.25rem + 0.625vw, 0.625rem);
}

.otpInput {
  width: clamp(2.5rem, 2rem + 2.5vw, 3.25rem);
  height: clamp(3rem, 2.5rem + 2.5vw, 3.75rem);
  text-align: center;
  font-size: var(--text-xl);
  font-weight: 700;
  color: var(--color-accent-gold);
  border: 2px solid var(--color-border);
  border-radius: var(--radius-lg);
  outline: none;
  transition: border-color var(--transition-fast), box-shadow var(--transition-fast);
  background: var(--color-surface);
}

.otpInput:focus {
  border-color: var(--color-primary-saffron);
  box-shadow: 0 0 0 3px rgba(255, 140, 0, 0.15);
}

.otpInputFilled {
  border-color: var(--color-primary-saffron-light);
  background: var(--color-surface);
}

/* --- Verify button --- */
.verifyButton {
  width: 100%;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-base);
  font-weight: 700;
  color: var(--color-neutral-white);
  background: var(--gradient-cta);
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: box-shadow var(--transition-fast), transform var(--transition-fast);
}

.verifyButton:hover {
  box-shadow: var(--shadow-lg);
  transform: translateY(-1px);
}

.verifyButton:active {
  transform: scale(0.98);
}

.verifyButton:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

/* --- Resend row --- */
.resendRow {
  display: flex;
  justify-content: center;
}

.resendTimer {
  font-size: var(--text-xs);
  color: var(--color-text-secondary);
}

.resendButton {
  font-size: var(--text-xs);
  font-weight: 600;
  color: var(--color-primary-saffron);
  cursor: pointer;
  background: none;
  border: none;
  text-decoration: underline;
}

.resendButton:hover {
  color: var(--color-primary-saffron-dark);
}

/* --- Error text --- */
.errorText {
  font-size: var(--text-xs);
  color: var(--color-error);
  text-align: center;
}

/* ============================================
   Full-screen overlays (Processing / Success / Failure)
   ============================================ */
.fullScreenOverlay {
  position: relative;
  z-index: 1;
  background: var(--color-page-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100dvh;
  animation: overlayFadeIn 0.3s ease;
}

@keyframes overlayFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* --- Processing --- */
.processingContent {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-component-gap);
  padding: var(--space-page-x);
}

.spinner {
  width: clamp(2.5rem, 2rem + 2.5vw, 3.5rem);
  height: clamp(2.5rem, 2rem + 2.5vw, 3.5rem);
  border: 3px solid var(--color-border);
  border-top-color: var(--color-primary-saffron);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.processingText {
  font-size: var(--text-base);
  color: var(--color-text-secondary);
}

/* --- Success --- */
.successContent {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-component-gap);
  padding: var(--space-page-x);
  text-align: center;
}

.successIcon {
  font-size: clamp(3rem, 2.5rem + 2.5vw, 4rem);
  animation: successPop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes successPop {
  0% { transform: scale(0); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.successTitle {
  font-size: var(--text-2xl);
  font-weight: 700;
  color: var(--color-success);
}

.successAmount {
  font-size: var(--text-base);
  color: var(--color-text-secondary);
}

.successSub {
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
  max-width: 20rem;
  line-height: 1.5;
}

.successSpinner {
  width: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
  height: clamp(1.5rem, 1.25rem + 1.25vw, 2rem);
  border: 2px solid var(--color-border);
  border-top-color: var(--color-primary-saffron);
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}

/* --- Failure --- */
.failureContent {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--space-component-gap);
  padding: var(--space-page-x);
  text-align: center;
}

.failureIcon {
  font-size: clamp(3rem, 2.5rem + 2.5vw, 4rem);
}

.failureTitle {
  font-size: var(--text-2xl);
  font-weight: 700;
  color: var(--color-error);
}

.failureSub {
  font-size: var(--text-sm);
  color: var(--color-text-secondary);
}

.failureActions {
  display: flex;
  flex-direction: column;
  gap: clamp(0.5rem, 0.375rem + 0.625vw, 0.75rem);
  width: 100%;
  max-width: 18rem;
}

.retryButton {
  width: 100%;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-base);
  font-weight: 600;
  color: var(--color-neutral-white);
  background: var(--color-primary-saffron);
  border: none;
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.retryButton:hover {
  background: var(--color-primary-saffron-dark);
}

.supportButton {
  width: 100%;
  padding: clamp(0.75rem, 0.625rem + 0.625vw, 1rem);
  font-size: var(--text-sm);
  font-weight: 500;
  color: var(--color-text-primary);
  background: transparent;
  border: 1.5px solid var(--color-border);
  border-radius: var(--radius-button);
  cursor: pointer;
  transition: all var(--transition-fast);
}

.supportButton:hover {
  border-color: var(--color-border);
  background: rgba(255, 255, 255, 0.08);
}

/* ============================================
   Responsive
   ============================================ */
@media (max-width: 479px) {
  .bottomSheet {
    max-height: 95vh;
  }

  .sheetContent {
    padding: 0 var(--space-page-x) clamp(1.5rem, 1rem + 2.5vw, 2rem);
  }
}

@media (min-width: 768px) {
  .bottomSheet {
    max-width: 32rem;
    margin: 0 auto;
    border-radius: var(--radius-2xl);
    margin-bottom: 2rem;
  }

  .fullScreenOverlay {
    background: rgba(0, 0, 0, 0.45);
  }

  .successContent,
  .processingContent,
  .failureContent {
    background: var(--color-surface);
    border-radius: var(--radius-2xl);
    padding: clamp(2rem, 1.5rem + 2.5vw, 3rem);
    box-shadow: var(--shadow-lg);
  }
}
